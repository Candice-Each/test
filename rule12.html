<html lang="en">

<head>
    <title>Hall 9 - Rule 1</title>
</head>

<body>
    <div class="toc">
        <ul>
            <li><a href="#rule1" data-load="rule1.html">Conduct</a></li>
            <li><a href="#rule12" data-load="rule12.html">Visitors</a></li>
            <li><a href="#rule13" data-load="rule13.html">Room & Identity</a></li>
            <li><a href="#rule14" data-load="rule14.html">Hall Activities</a></li>
        </ul>
    </div>
    <div class="rules">
        <div id="rule12">
            <div class="heading">2. Visitors</div>
            <div class="rule">
                2.1 All visitors MUST register at the security counter upon entrance and departure.
            </div>
            <div class="rule">
                2.2 Visiting hours are from 8:00am to 12:00 mid-night. Visitors are not allowed to enter or remain
                within the Hall areas beyond visiting hours.
            </div>
            <div class="rule">
                2.3 Residents or visitors are not allowed to enter a room without the prior consent of the room
                occupant
                in the case of a single room, and of BOTH occupants in the case of a shared room.
            </div>
            <div class="rule">
                2.4 Shared washrooms between rooms are not allowed to be used by residents or visitors of the
                opposite
                gender. Washrooms located on the G-floor and LG-floor should be used instead.
            </div>
            <div class="rule">
                2.5 Visitors may use the study room on the G/F in the presence of their hosts.
            </div>
            <div class="rule">
                2.6 Visitors are abiding by these rules and regulations. Residents are held fully responsible for
                the
                conduct of their visitors and have the duty to make visitors aware of the said rules and
                regulations.
                Residents are accountable for misconduct committed by their visitors.
            </div>
            <div class="rule">
                2.7 Residents are accountable for having the computer record of their visitors cleared by 12:00
                mid-night. If they fail to do so more than twice in a semester, they are expected to write an
                explanation letter to the RM.
            </div>
        </div>

    </div>

    <style>
        body {
            font-family: Outfit;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-color: #e6d1ff;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .toc {
            position: fixed;
            top: 10px;
            left: 10px;
            background-color: #f1f1f1;
            padding: 10px;
            margin: 0;
            list-style-type: none;
            border-radius: 10px;
            visibility: hidden;
            width: 205px;
        }

        .toc ul {
            padding: 0;
            list-style-type: none;
        }

        .toc li {
            margin: 10px 0;
        }

        .toc a {
            text-decoration: none;
            color: black;
            font-size: 1.5em;
        }

        .rules {
            margin-left: 250px;
            margin-bottom: 1000px;
        }

        .heading {
            font-size: 1.5em;
            margin-top: 20px;
            font-weight: bold;
        }

        .rule {
            margin-top: 10px;
        }

        @media (max-width: 960px) {
            .toc {
                width: 80px;
                font-size: small;
            }

            .rules {
                margin-left: 120px;
            }
        }
    </style>

    <script>
         $(document).ready(function () {
            var toc = document.querySelector('.toc');
            toc.style.visibility = 'visible';
            var tocPos = rules.offsetTop;
            toc.style.position = 'absolute';
            toc.style.top = tocPos + 'px';
            $('.toc a').on('click', function (e) {
                e.preventDefault();
                var loadPage = $(this).data('load');
                $('#rules-container').load(loadPage, function (response, status, xhr) { });
            });

            $(window).scroll(function () {

                var scrollPos = $(window).scrollTop();

                if (scrollPos >= tocPos) {
                    toc.style.position = 'fixed';
                    toc.style.top = '10px';
                } else {
                    toc.style.position = 'absolute';
                    toc.style.top = tocPos + 'px';
                }

                headings.forEach((heading, index) => {
                    if (scrollPos >= heading.offsetTop - 20) {
                        tocLinks.forEach((link) => {
                            link.style.color = 'black';
                            link.style.fontWeight = 'normal';
                        });
                        tocLinks[index].style.color = '#8c6cbf';
                        tocLinks[index].style.fontWeight = 'bold';
                    }
                });
            });
            var rules = document.querySelectorAll('.rule');
            rules.forEach((rule) => {
                rule.innerHTML = rule.innerHTML.replace(/(\d+\.\d+(\.\d+)?)/g, '$1&nbsp;&nbsp;&nbsp;');
            });

            var rules = document.querySelector('.rules');
            if (rule4) {
                var height = window.innerHeight - rules.offsetHeight;
                height = height > 20 ? height : 20;
                rules.style.marginBottom = height + 'px';
            }
            $("#rule1").load("rule1.html");
            $("#rule12").load("rule12.html");
            $("#rule13").load("rule13.html");
            $("#rule14").load("rule14.html");
        });
        // $(document).ready(function () {
        //     var toc = document.querySelector('.toc');
        //     var rule1 = document.querySelector('#rule1');
        //     var tocPos = rule1.offsetTop;
        //     var rules = document.querySelector('.rules');
        //     var headings = document.querySelectorAll('.heading');
        //     var tocLinks = document.querySelectorAll('.toc a');

        //     

        //     var interval = setInterval(() => {
        //         if (rule1.offsetTop !== tocPos) {
        //             tocPos = rule1.offsetTop;
        //             toc.style.top = tocPos + 'px';
        //         }
        //     }, 20);
        //     setTimeout(() => {
        //         clearInterval(interval);
        //     }, 1000);


        //     tocLinks.forEach((link, index) => {
        //         link.addEventListener('click', (e) => {
        //             $('html, body').animate({
        //                 scrollTop: headings[index].offsetTop - 10
        //             }, 200);
        //         });
        //     });
        // });

        // var rules = document.querySelectorAll('.rule');
        // rules.forEach((rule) => {
        //     rule.innerHTML = rule.innerHTML.replace(/(\d+\.\d+(\.\d+)?)/g, '$1&nbsp;&nbsp;&nbsp;');
        // });

        // var rules = document.querySelector('.rules');
        // var rule4 = document.querySelector('#rule4');
        // var height = window.innerHeight - rule4.offsetHeight
        // height = height > 20 ? height : 20;
        // rules.style.marginBottom = height + 'px';
    </script>

</body>

</html>